#!/usr/bin/env bash
set -e


root_path=$(realpath .)
echo $root_path
config_path="$(realpath .)/samconfig.toml"
echo $config_path

if [ ! -f "$config_path" ]; then
  echo "$config_path does not exist."
  exit 1
fi

template_path="${root_path}/.aws-sam/build/template.yaml"
output_template_path="${root_path}/.aws-sam/build/packaged.yaml"

echo "== SAM package..."

sam package \
  --template-file "$template_path" \
  --config-file "$config_path" \
  --output-template-file $output_template_path \
  --s3-prefix "zip-package-python" 